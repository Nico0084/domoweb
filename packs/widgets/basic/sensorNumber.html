<polymer-element name="dmw-basic-sensorNumber" extends="dmw-widget">
	<template>
		<style type="text/css">
			:host {
				height: 100%;
			}
			#number {
				position: relative;
				top: 50%;
				-webkit-transform: translateY(-50%);
				-ms-transform: translateY(-50%);
				transform: translateY(-50%);
	  			text-align: center;
				font-size: 4em;
				overflow: hidden;
			}
			#unit {
				position: absolute;
				top:5px;
				right: 5px;
				font-size: 1em;
			}
			#labelprimary {
				display: block;
				font-size: 0.8em;
				position: absolute;
				top: -1.4em;
				left: 0;
				text-overflow: ellipsis;
			}
			#labelsecondary {
				display: block;
				transform: rotate(-90deg);
				transform-origin: bottom left;
				-ms-transform: rotate(-90deg);
				-ms-transform-origin: bottom left;
				-webkit-transform: rotate(-90deg);
				-webkit-transform-origin: bottom left;
				position: absolute;
				left: 0;
				bottom: 0;
				font-size: 0.8em;
				text-overflow: ellipsis;
			}
		</style>
	    <dmw-sensor sensorkey="number" sensorvalue="{{number}}"></dmw-sensor>
		<shadow></shadow>
		<div id='number'>{{number}}</div>
		<div id='unit'>{{unit}}</div>
	</template>
	<script>
		Polymer('dmw-basic-sensorNumber', {
			ready: function() {
				this.super();
				this.number = "--";
				this.unit = "-"
			},
			paramsReady: function() {
				var sensor = this.shadowRoot.querySelector('dmw-sensor[sensorkey="number"]');
				if (this.sensors['primary']) {
					sensor.setAttribute('sensorid', this.sensors['primary']['id']);
					this.labelprimary = this.sensors['primary']['name'];
					this.labelsecondary = this.sensors['primary']['device']['name'];
					this.displayValue(this.sensors['primary']['last_value'], this.datatypes[this.sensors['primary']['datatype_id']]['unit']);				
				}
			},
			displayValue: function(number, unit) {
				if (this.options['autoconvert']==1 && number > 0) {
				   	var k = 1000;
				   	var sizes = ['', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'];
				   	var i = Math.floor(Math.log(number) / Math.log(k));
					this.number = (number / Math.pow(k, i)).toPrecision(3);
					this.unit = sizes[i] + i18n.t("basic:unit", { context: this.sensors['primary']['datatype_id'], value: unit });
				} else {
					this.number = number;
					this.unit = i18n.t("basic:unit", { context: this.sensors['primary']['datatype_id'], value: unit });
				}
			}
		});
	</script>
</polymer-element>