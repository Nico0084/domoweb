<link rel="import" href="/polymer/polymer.html">
<link rel="import" href="/components/websockets.html">
<link rel="import" href="/components/sensor.html">

<polymer-element name="dmw-widget" attributes="instanceid edit">
	<template>
	    <web-socket id="socket"></web-socket>
	    <template if="{{edit}}">
	    	<button on-click="{{editWidget}}">Edit</button>
	    	<button on-click="{{removeWidget}}">Remove</button>
	    </template>
	</template>
	<script>
		Polymer("dmw-widget", {
			ready: function() {
				var sensor = this.shadowRoot.querySelector('dmw-sensor[sensorkey="number"]');
				sensor.setAttribute('sensorid', 1);
			},
			removeWidget: function(e) {
		    	this.$.socket.send("widgetinstance-remove", {'instance_id':this.instanceid});
			}
		});
	</script>
</polymer-element>

